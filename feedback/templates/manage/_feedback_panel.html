{% load i18n %}
{% comment %}
	expects to be used under bootstrapped.html
	expects from context:
		form
		feedback
		post_url
		older_url (optional)
{% endcomment %}
<div class="panel panel-success feedback-panel">
	<div class="panel-heading clearfix">
		<a rel="external"
			class="panel-title btn btn-xs btn-link"
			data-toggle="tooltip"
			data-trigger="hover"
			data-placement="top"
			data-title="{% trans 'Show exercise in A+' %}"
			title="{% trans 'Show exercise in A+' %}"
			href="{{ feedback.exercise.html_url }}"
			>{{ feedback.exercise_path }}</a>
		<div class="btn-toolbar pull-right">
			{% if older_url %}
				<a class="btn btn-default btn-sm"
					data-toggle="tooltip"
					data-trigger="hover"
					data-placement="top"
					data-title="{% trans 'Show all feedbacks from this student for this exercise' %}"
					title="{% trans 'Show all feedbacks from this student for this exercise' %}"
					href="{{ older_url }}"
					>
					{% trans "Older feedbacks" %}
					<span class="badge">{{ feedback.older_versions_count|default:"&#9473;" }}</span>
				</a>
			{% endif %}
		</div>
	</div>
	<table class="table">
		{% for field in feedback_form %}
			{% if field.has_data %}
				<tr>
					<th>
						<span rel="tooltip"
							data-toggle="tooltip"
							data-trigger="hover"
							data-placement="bottom"
							data-html="true"
							data-title="{{ field.help_text }}"
							>
							{{ field.label|default:field.name }}
						</span>
					</th>
					<td>{{ field.display_data }}</td>
				</tr>
			{% endif %}
		{% endfor %}
	</table>
	<div class="panel-footer">
		Posted {{ feedback.timestamp }}
		{% with time=feedback.form_data.timespent %}
			{# One variable to rule them all! #}
			{% if time %}
				{# FIXME: use expected time to set different colors #}
				<span class="label label-primary pull-right">{{ time }} mins</span>
			{% endif %}
		{% endwith %}
	</div>
</div>
